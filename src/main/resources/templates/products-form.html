<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head >
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width , initial-scale=1.0"  >
        <meta http-equiv="X-UA-Compatible" content="ie-edge"  >
        <meta http-equiv="Content-Type" content="text/html ; charset=UTF-8" />
        <link rel="shortcut icon" href="assets/ico/favicon.png">
        <!-- Bootstrap core CSS -->
        <link href="assets/css/bootstrap.css" rel="stylesheet">
    
    
        <link href="assets/css/font-awesome.min.css" rel="stylesheet">
    
        <link href='http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic' rel='stylesheet' type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=Raleway:400,300,700' rel='stylesheet' type='text/css'>
    
        
        
        <script src="https://unpkg.com/htmx.org@1.9.3"></script>
        <script src="https://unpkg.com/hyperscript.org@0.9.12"></script>
        <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>

        <style>

            :root{
                ---gutter :0.5em;
            }

            body{
                padding: var(--gutter)
            }

            


            .product .nom input[type=text]{
                width: calc(30% - var(--gutter));
            } 
            .product .descriptif input[type=text]{
                width: calc(30% - var(--gutter));
            }
            .product .label input[type=text]{
                width: calc(30% - var(--gutter));
            }
            .product .categorie input[type=text]{
                width: calc(30% - var(--gutter));
            }
            .product .prix input[type=text]{
                width: calc(30% - var(--gutter));
            }
            
            .product .stocks input[type=text]{
                width: calc(30% - var(--gutter));
            }

            .product .image input[type=text]{
                width: calc(30% - var(--gutter));
            }
           
            .image-height{
                height: 6rem;
            }
            

        </style>
    </head>
    <body>
        
        <div class="container">
                
            <div th:fragment="productsformFragment" 
            class="products-form"  
            id="productsformFragment" 
            hx-swap-oob="true">
        
        
           
                
            <div class="titre"> 
                <h2> 
                    <span 
                    style="border-bottom: 3px solid darkcyan;
                            border-right: 3px solid darkcyan;
                            border-radius: 9px;width: 20%;
                            padding-left: 20%;
                            padding-right: 10%;
                            margin-left: 20%;">
                            AJOUT ProductS
                        </span>
                    </h2>
            </div>
        
        <form th:action="@{/products/addNew}" 
              hx-target=".products-list"
              hx-post="/products/addNew" 
              name ="product"
              enctype="multipart/form-data"
              style="margin:0 auto;">
                
                
              <div class="row ">
                <div class="form-group col-md-3">
                    <label for="nomProduit" class="form-label">NOM</label>
                    <input type="text" 
                           class="form-control" 
                           placeholder="nom" 
                           id="nom" 
                           name="nom" >
                  </div>
            
                <div class="form-group col-md-3">
                    <label for="descriptif" class="form-label">DESCRIPTIF</label>
                    <input type="text"  
                           class="form-control" 
                           placeholder="descriptif" 
                           id="descriptif" 
                           name="descriptif" >
                  </div>
                  <div class="form-group col-md-3">
                    <label for="descriptif" class="form-label">LABEL</label>
                    <input type="text"  
                           class="form-control" 
                           placeholder="label" 
                           id="label" 
                           name="label" >
                  </div>
                  <div class="form-group col-md-3">
                    <select   name="categorie" >
                        <option
                            th:each="categorie : ${T(org.nioun.essentials.mog.model.Categorie).values()}"
                            th:value="${categorie}"
                            th:text="${categorie.label}"
                        >
                        </option>
                    </select>
                  </div>
            </div>
            
            <div class="row ">
                <div class="form-group col-md-3 ">
                    <label for="prix" class="form-label">PRIX</label>
                    <input type="text" 
                           class="form-control" 
                           placeholder="prix" 
                           id="prix" 
                           name="prix" >
                  </div>
            
                  <div class="form-group col-md-3">
                    <label for="stocks" class="form-label">STOCKS</label>
                    <input type="text" 
                           class="form-control" 
                           placeholder="stocks" 
                           id="stocks" 
                           name="stocks" >
                  </div>
                  <div class="form-group  col-md-3">
                    <label for="imageProduit" class="form-label">IMAGE PRODUIT</label>
                    <input type="file" 
                           class="form-control" 
                           placeholder="image produit" 
                           id="fileImage" 
                           name="file" 
                           accept="image/png,image/jpeg">
                    <p id="ImageError" class="hidden text-muted">
                        File siwe exceeds 1MB. Please upload a smaller image
                    </p>       
                  </div>
                  
                  <div >
                    <img th:src="@{assets/img/apachChach.png}" id="thumbnail" class=" image-height w-auto " alt="preview image" >
                  </div>
                
            </div>

           <div class="roz">
                <div class="buttons col-md-2">
                    <button 
                            type="submit"
                            class="btn btn-primary">AJOUTER
                        </button>      
                </div>  
           </div>
              
           </form>
         
  </div>
  
      

</div>



    <script>
        $(document).ready(function(){
            $('#fileImage').on('change',function () {

                fileSize= this.files[0].size;
                // 1MB = 1024 * 1024
                if(fileSize > 1048576){
                    $('#ImageError').removeClass('hidden');
                } else {
                    $('#ImageError').addClass('hidden');
                    showThumbnail(this);
                }
              })
        });

        function showThumbnail(fileInput) {
                    var file = fileInput.files[0];
                var reader = new FileReader();
                reader.onload = function (e) {
                    $('#thumbnail').attr('src', e.target.result);
                  }

                  reader.readAsDataURL(file);
              }
    </script>

    </body>
</html>